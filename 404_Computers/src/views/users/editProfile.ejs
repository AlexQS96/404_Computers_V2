<!DOCTYPE html>
<html lang="es">
<%- include('../partials/head.ejs' ,{title: 'Editar Perfil - '}) %>
<body class="background_Leaves">
  <div class="container_Page">
    <%- include('../partials/header.ejs') %> 
<main class="profile">
    <div class="profileEditContainer">
        <h2>Editar mi perfil</h2>
        <form class="formEditProfile" action="/updateprofile/<%= user.id %>?_method=PUT" method="POST" id="form" enctype="multipart/form-data">
            
            <div class="profileFormCol col1edit">
                
                <div class="input-container">
                    <label for="name">Nombre</label>
                    <input class="input-style" type="text" id="name" name="name" placeholder="Nombre" value="<%=user.name %>">
                    <span class="redError" id="nameErrors"></span>
                </div>
                <div class="input-container">
                    <label for="surname">Apellido</label>
                    <input class="input-style" type="text" id="surname" name="surname" placeholder="Apellido" value="<%=user.surname %>">
                    <span class="redError" id="surnameErrors"></span>
                </div>
                <div class="input-container">
                    <label for="dni">DNI</label>
                    <input class="input-style" type="number" id="dni" name="dni" placeholder="DNI" value="<%=user.dni %>">
                    <span class="redError" id="dniErrors"></span>
                    <% if (locals.errors && errors.dni) { %>
                        <small class="redError"><%= errors.dni.msg %> </small>
                    <% } %>
                </div>
                <div class="input-container">
                    <label for="address">Dirección</label>
                    <input class="input-style" type="text" id="address" name="address" placeholder="Direccion" value="<%=user.address %>">
                    <span class="redError" id="addressErrors"></span>
                </div>
                <div class="input-container">
                    <label for="phoneNumber">Telefono</label>
                    <input class="input-style" type="tel" id="phoneNumber" name="phone" placeholder="Teléfono" value="<%=user.phone %>">
                    <span class="redError" id="phoneNumberErrors"></span>
                </div>
            </div>
            
            <div class="profileFormCol col2edit">

                <div class="locationSelects">
                    <div class="input-container">
                        <label for="province">Provincia</label>
                        <select name="province" id="provinceList" class="input-select w100i">
                            <option value=<%= user.province? user.province : "" %> disabled selected><%= user.province? user.province : "Elija una Provincia" %></option>
                        </select>
                    </div>
                    <div class="input-container">
                        <label for="province">Ciudad</label>
                        <select name="city" id="citiesList" class="input-select w100i">
                            <option value=<%= user.city? user.city : "" %> disabled selected><%= user.city? user.city : "Elija una Ciudad" %></option>
                        </select>
                    </div>
                </div>

                <div class="userPhotoEdit">
                    <p>Foto de Perfil</p>
                    <div class="profilePicture">
                        <img id="changeImageProfile" src="/images/users/<%=user.image %>" alt="<%=user.image %>">
                        <label class="buttonToAddImage" style="height: fit-content; margin: auto; padding: 15px;">
                            <input style="display: none;" type="file" id="examinar" name="image" accept=".jpg, .png, .webp, .jpeg, .bmp">
                            <p><i class="fa fa-upload" aria-hidden="true"></i>Cambiar Foto de Perfil</p>
                        </label>
                    </div>
                </div>

            </div>
                
            <div class="button_container">
                <button type="submit" class="btn btn-edit">Guardar</button>
                <span id="btnDeleteUser" class="btnDel">Eliminar Perfil</span>
            </div>

            <span class="redErrorSub" id="submitErrors"></span>
        </form>

        <div class="modalFormBox">
            <form class="modalFormContent" action="/borrarPerfil/<%- user.id %>?_method=DELETE" method="POST">
                <p>Estas Seguro? Se borrara "toda" su informacion.</p>
                <button class="cancelDeleteBTN" type="button" title="Cancelar">Cancelar</button>
                <button type="submit" title="Borrar Perfil">Confirmar</button>
            </form>
        </div>
    </div>
</main>
    <%- include('../partials/footer.ejs') %> 
  </div>
  <script src="/javascripts/userEditFrontValidator.js"></script>
  <script src="/javascripts/moment.min.js"></script>
</body>
</html>